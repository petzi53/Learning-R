---
title: "02 Getting started"
author: "Peter Baumgartner"
date: "2017/02/17"
output: 
  html_notebook: 
    pandoc_args: [ 
      "--number-offset=1,0" 
    ]
    fig_caption: true
    number_sections: yes
    toc: yes
    toc_depth: 3
---
```{r label = "global-options", echo=FALSE, highlight=TRUE}
knitr::opts_chunk$set(
        message = F,
        error = F,
        warning = F,
        comment = NA,
        highlight = T,
        prompt = T
        )
if (!(exists("tidyverse"))) {install.packages("tidyverse")}
        library(tidyverse)
# if (!(exists("oiblabs"))) {install.packages("oilabs")}
#        library(oilabs)
```
***

Working on the exercises of chapter 2 of [ggplot2: Elegant Graphics for Data] Analysis(https://www.amazon.de/ggplot2-Elegant-Graphics-Data-Analysis/dp/331924275X/ref=sr_1_1?ie=UTF8&qid=1487435428&sr=8-1&keywords=ggplot2), second edition. See also the material on GitHub [ggplot2-book](https://github.com/hadley/ggplot2-book), here especially [Chap.2](https://github.com/hadley/ggplot2-book/blob/master/ggplot.rmd).

>**Warning:** Keep in mind that I am still learning. There is no guarantee that my solutions are correct nor do they always present the most efficient way of doing things. Please feel free to comment on anything that you may think is wrong or somehow noteworthy (by writing an issue or by sending a pull request).

#Exercises of Chapter 2

## How to get more info about the `mpg` dataset?
List five functions that you could use to get more information about the `mpg` dataset.

* `class()`     to see if it is a tibble and could be called without `head` or `tail` function
* `str()`       to look at the structure
* `glimpse()`   similiar but using the whole window width
* `head()`      first 6 record of the data set
* `tail()`      last 6 recors of the data set
* `View()`      load file into RStudio data viewer
* `summary()`   calculate summary statistics
```{r}
class(mpg)
str(mpg)
glimpse(mpg)
head(mpg)
tail(mpg)
names(mpg)
summary(mpg)
View(mpg)

```


## How can you find out what other datasets are included with ggplot2?
There is a listing on the special [documentation page](http://docs.ggplot2.org/current/index.html) for ggplot2 but there is also a general command `data()` for a listing of datasets for specific packages: More information with: `?data`
```{r list-available-data-sets}
data(package = "ggplot2")
?data
```

## How to convert fuel consumption into fuel economy?
Apart from the US, most countries use _fuel consumption_ (fuel consumed over fixed distance) rather than _fuel economy_ (distance travelled with fixed amount of fuel). How could you convert cty and hwy into the European standard of l/100km?

For the calcuation see the page on [Metric Conversions](http://www.metric-conversions.org): 

* 1 US liquid gallon = 3.78541 Litre
* 1 Mile = 1.609344 Kilometer

```{r}
mpgTol100km <- function(milespergallon){
  GalloLiter <- 3.785411784
  MileKilometer <- 1.609344 

  l100km <- round((100*GalloLiter)/(milespergallon*MileKilometer), digits = 1)
  l100km
}

mpg <- mpg %>%
        mutate(cty_1 = mpgTol100km(cty),
                  hwy_1 = mpgTol100km(hwy))
```

## How to get number of models and variations?
Which manufacturer has the most the models in this dataset? Which model has the most variations? Does your answer change if you remove the redundant specification of drive train (e.g. "pathfinder 4wd", "a4 quattro") from the model name?
```{r}
by_manufacturer <- group_by(mpg, manufacturer, sort = TRUE)
(models <- count(mpg, manufacturer, sort = TRUE))
by_models <- group_by(mpg, manufacturer, model)
per_model   <- summarise(by_models, nr = n())
(arrange(per_model, desc(nr)))
per_manufacturer <- summarise(per_model, "models" = n())
(arrange(per_manufacturer, desc(models)))
```
Dodge has the model variants and Toyota the most models. Model Dodge Caravan 2wd has the most variation.

I do not understand the last part of the question: "Does your answer change if you remove the redundant specification of drive train (e.g. "pathfinder 4wd", "a4 quattro") from the model name?" 

What exactly is redundant? I could remove "quattro" from model "a4" from "audi" but this does not make sense with "pathfinder 4wd" from "nissan"
